server:
  port: 8080
  host: "0.0.0.0"
  tls:
    enabled: false
    cert_file: ""
    key_file: ""

logging:
  level: "info"          # debug, info, warn, error
  format: "text"         # json or text
  output: "stdout"       # stdout, stderr, or file path

mongodb:
  uri: "mongodb://localhost:27017"
  database: "ocpp_emu"
  connection_timeout: 10s
  max_pool_size: 100

  # Collection names (can be customized)
  collections:
    messages: "messages"
    transactions: "transactions"
    stations: "stations"
    sessions: "sessions"
    meter_values: "meter_values"

  # Time-series collection for meter values
  timeseries:
    enabled: true
    granularity: "seconds"  # seconds, minutes, hours

csms:
  # Default CSMS connection settings (can be overridden per station)
  default_url: "ws://localhost:9000"
  connection_timeout: 30s
  heartbeat_interval: 60s
  max_reconnect_attempts: 5
  reconnect_backoff: 10s

  # TLS/Certificate settings for secure connections
  tls:
    enabled: false
    ca_cert: ""
    client_cert: ""
    client_key: ""
    insecure_skip_verify: false

auth:
  # Enable authentication (set to false for development without auth)
  enabled: false

  # JWT secret key - MUST be changed in production (min 32 characters)
  # Can be overridden via OCPP_EMU_AUTH_JWT_SECRET environment variable
  jwt_secret: "change-me-in-production-min-32-characters"

  # JWT token expiry duration
  jwt_expiry: 24h

  # Users list (config-based user management)
  # Generate password hashes with: go run cmd/tools/hashpw/main.go "your-password"
  users:
    - username: "admin"
      # Default password: "admin" - CHANGE IN PRODUCTION
      password_hash: "$2a$10$J/7p6FH/8F6eLiXPYSQ47On1drDrhf13jxojUDwBuRac6XXgE.JRi"
      role: "admin"
      enabled: true
    - username: "viewer"
      # Default password: "viewer" - CHANGE IN PRODUCTION
      password_hash: "$2a$10$oIkpenwKDDue5XpA//z2.e5Q1VJA.DwKJsVZUAj4IR6Kdih86iCBC"
      role: "viewer"
      enabled: true

  # API keys for programmatic access
  # Generate key hashes with: go run cmd/tools/genkey/main.go
  api_keys: []
    # Example:
    # - name: "ci-pipeline"
    #   key_hash: "sha256:..."
    #   role: "viewer"
    #   enabled: true
    #   expires_at: "2025-12-31T23:59:59Z"

application:
  # Maximum number of concurrent stations
  max_stations: 10

  # Cache TTL for in-memory session data
  cache_ttl: 3600s

  # Enable debug features (custom messages, protocol violations)
  debug_mode: true

  # Maximum messages to keep in memory before flushing to DB
  message_buffer_size: 1000

  # Batch insert interval for performance
  batch_insert_interval: 5s
